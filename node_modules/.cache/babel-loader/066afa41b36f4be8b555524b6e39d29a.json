{"ast":null,"code":"import { useEffect, useState } from 'react';\n\nconst combineStoredValues = arr => arr.reduce((acc, curr) => {\n  if (curr.sku) {\n    let fromMap = acc.map[curr.sku];\n\n    if (!fromMap) {\n      acc.map[curr.sku] = fromMap = {\n        name: curr.name,\n        sku: curr.sku,\n        src: curr.src,\n        price: curr.price,\n        key: curr.key,\n        color: curr.color,\n        quanity: 0\n      };\n      acc.result.push(fromMap);\n    }\n\n    fromMap.quanity += parseFloat(curr.quanity);\n  } else {\n    acc.result.push(curr);\n  }\n\n  return acc;\n}, {\n  map: {},\n  result: []\n}).result;\n\nfunction useLocalStorage(key, initialValue) {\n  // Should either store products into global context or find a way to retrieve the values from localstorage PLUS re-render on update\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key); // Parse stored json or if none return initialValue\n\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  }); // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n\n  const setValue = value => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value; // Save state\n\n      setStoredValue(combineStoredValues(valueToStore)); // Save to local storage\n\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    setStoredValue(combineStoredValues(storedValue));\n  }, []);\n  return [storedValue, setValue];\n}\n\nexport default useLocalStorage;","map":{"version":3,"sources":["E:/React_Projects/e-commerce_bicycle/src/components/custom_hooks/useLocalStorage.js"],"names":["useEffect","useState","combineStoredValues","arr","reduce","acc","curr","sku","fromMap","map","name","src","price","key","color","quanity","result","push","parseFloat","useLocalStorage","initialValue","storedValue","setStoredValue","item","window","localStorage","getItem","JSON","parse","error","console","log","setValue","value","valueToStore","Function","setItem","stringify"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;;AACA,MAAMC,mBAAmB,GAAIC,GAAD,IAC1BA,GAAG,CAACC,MAAJ,CACE,CAACC,GAAD,EAAMC,IAAN,KAAe;AACb,MAAIA,IAAI,CAACC,GAAT,EAAc;AACZ,QAAIC,OAAO,GAAGH,GAAG,CAACI,GAAJ,CAAQH,IAAI,CAACC,GAAb,CAAd;;AACA,QAAI,CAACC,OAAL,EAAc;AACZH,MAAAA,GAAG,CAACI,GAAJ,CAAQH,IAAI,CAACC,GAAb,IAAoBC,OAAO,GAAG;AAC5BE,QAAAA,IAAI,EAAEJ,IAAI,CAACI,IADiB;AAE5BH,QAAAA,GAAG,EAAED,IAAI,CAACC,GAFkB;AAG5BI,QAAAA,GAAG,EAAEL,IAAI,CAACK,GAHkB;AAI5BC,QAAAA,KAAK,EAAEN,IAAI,CAACM,KAJgB;AAK5BC,QAAAA,GAAG,EAAEP,IAAI,CAACO,GALkB;AAM5BC,QAAAA,KAAK,EAAER,IAAI,CAACQ,KANgB;AAO5BC,QAAAA,OAAO,EAAE;AAPmB,OAA9B;AASAV,MAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,CAAgBT,OAAhB;AACD;;AACDA,IAAAA,OAAO,CAACO,OAAR,IAAmBG,UAAU,CAACZ,IAAI,CAACS,OAAN,CAA7B;AACD,GAfD,MAeO;AACLV,IAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,CAAgBX,IAAhB;AACD;;AACD,SAAOD,GAAP;AACD,CArBH,EAsBE;AACEI,EAAAA,GAAG,EAAE,EADP;AAEEO,EAAAA,MAAM,EAAE;AAFV,CAtBF,EA0BEA,MA3BJ;;AA4BA,SAASG,eAAT,CAAyBN,GAAzB,EAA8BO,YAA9B,EAA4C;AAC1C;AACA;AAEA;AAEA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCrB,QAAQ,CAAC,MAAM;AACnD,QAAI;AACF;AAEA,YAAMsB,IAAI,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4Bb,GAA5B,CAAb,CAHE,CAKF;;AAEA,aAAOU,IAAI,GAAGI,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAH,GAAsBH,YAAjC;AACD,KARD,CAQE,OAAOS,KAAP,EAAc;AACd;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAEA,aAAOT,YAAP;AACD;AACF,GAhB6C,CAA9C,CAN0C,CAwB1C;AAEA;;AAEA,QAAMY,QAAQ,GAAIC,KAAD,IAAW;AAC1B,QAAI;AACF;AAEA,YAAMC,YAAY,GAChBD,KAAK,YAAYE,QAAjB,GAA4BF,KAAK,CAACZ,WAAD,CAAjC,GAAiDY,KADnD,CAHE,CAMF;;AAEAX,MAAAA,cAAc,CAACpB,mBAAmB,CAACgC,YAAD,CAApB,CAAd,CARE,CAUF;;AAEAV,MAAAA,MAAM,CAACC,YAAP,CAAoBW,OAApB,CAA4BvB,GAA5B,EAAiCc,IAAI,CAACU,SAAL,CAAeH,YAAf,CAAjC;AACD,KAbD,CAaE,OAAOL,KAAP,EAAc;AACd;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAnBD;;AAoBA7B,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,cAAc,CAACpB,mBAAmB,CAACmB,WAAD,CAApB,CAAd;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,SAAO,CAACA,WAAD,EAAcW,QAAd,CAAP;AACD;;AACD,eAAeb,eAAf","sourcesContent":["import { useEffect, useState } from 'react';\r\nconst combineStoredValues = (arr) =>\r\n  arr.reduce(\r\n    (acc, curr) => {\r\n      if (curr.sku) {\r\n        let fromMap = acc.map[curr.sku];\r\n        if (!fromMap) {\r\n          acc.map[curr.sku] = fromMap = {\r\n            name: curr.name,\r\n            sku: curr.sku,\r\n            src: curr.src,\r\n            price: curr.price,\r\n            key: curr.key,\r\n            color: curr.color,\r\n            quanity: 0,\r\n          };\r\n          acc.result.push(fromMap);\r\n        }\r\n        fromMap.quanity += parseFloat(curr.quanity);\r\n      } else {\r\n        acc.result.push(curr);\r\n      }\r\n      return acc;\r\n    },\r\n    {\r\n      map: {},\r\n      result: [],\r\n    }\r\n  ).result;\r\nfunction useLocalStorage(key, initialValue) {\r\n  // Should either store products into global context or find a way to retrieve the values from localstorage PLUS re-render on update\r\n  // State to store our value\r\n\r\n  // Pass initial state function to useState so logic is only executed once\r\n\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n\r\n      const item = window.localStorage.getItem(key);\r\n\r\n      // Parse stored json or if none return initialValue\r\n\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n\r\n      console.log(error);\r\n\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  // Return a wrapped version of useState's setter function that ...\r\n\r\n  // ... persists the new value to localStorage.\r\n\r\n  const setValue = (value) => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n\r\n      // Save state\r\n\r\n      setStoredValue(combineStoredValues(valueToStore));\r\n\r\n      // Save to local storage\r\n\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    setStoredValue(combineStoredValues(storedValue));\r\n  }, []);\r\n\r\n  return [storedValue, setValue];\r\n}\r\nexport default useLocalStorage;\r\n"]},"metadata":{},"sourceType":"module"}